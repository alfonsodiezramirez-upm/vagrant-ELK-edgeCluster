input {
    beats {
        client_inactivity_timeout => 3000
		port => 5044
		ssl  => false
    }
}
filter {
	json {
		source => "message"
		target => "messageParsed"
	}
    mutate {
		copy => { "messageParsed.deviceId" => "deviceId" }
		copy => { "messageParsed.maxTemperature" => "maxTemperature" }
		copy => { "messageParsed.meanTemperature" => "meanTemperature" }
		copy => { "messageParsed.minTemperature" => "minTemperature" }
		copy => { "messageParsed.maxHumidity" => "maxHumidity" }
		copy => { "messageParsed.meanHumidity" => "meanHumidity" }
		copy => { "messageParsed.minHumidity" => "minHumidity" }
		copy => { "messageParsed.maxWind" => "maxWind" }
		copy => { "messageParsed.meanWind" => "meanWind" }
		copy => { "messageParsed.isEnable" => "isEnable" }
		copy => { "messageParsed.timestamp" => "timestamp" }
		remove_field => [ "messageParsed", "message", "agent", "ecs" ]	
  }
}
output {
  elasticsearch {
    hosts => ["https://192.168.22.11:9200"]
    index => "edgecluster-new"
    ssl_certificate_verification => false
    user => "elastic"
    password => "#PASSWORD#"
 }
  file {
      path => "/var/log/logstash/output.log"
  }
}